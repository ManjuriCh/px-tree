<script>
/** @polymerBehavior Polymer.PX.TreeView */
Polymer.PX = Polymer.PX || {};

Polymer.PX.TreeView={
  /**
   * Tests to see if the passed value is a number
   * @private
   * @param {Mixed} o Value to test
   * @return {Boolean}
   */
  _isnum:function(o) {
    return (typeof o === 'number') && !isNaN(o) && isFinite(o);
  },

  /**
   * Tests to see if the passed value is a string
   * @private
   * @param {Mixed} o Value to test
   * @return {Boolean}
   */
  _isstr:function(o) {
    return typeof o === 'string';
  },

  /**
   * Determines whether or not the provided object is an array
   * @public
   * @param {Mixed} o The object being testing
   * @return {Boolean} True or false
   */
  _isarray:function(o){
    return Object.prototype.toString.call(o) === '[object Array]';
  },

  /**
   * Determines whether or not the provided object is an object
   * @public
   * @param {Mixed} o The object being testing
   * @return {Boolean} True or false
   */
  _isobj:function(o){
    return typeof o === 'object';
  },

  /**
   * Tests to see if the passed value is undefined
   * @private
   * @param {Mixed} o Value to test
   * @return {Boolean}
   */
  _isundef:function(o) {
    return o === undefined;
  },

  /**
   * Tests to see if the passed value is an element
   * @private
   * @param {Mixed} o Value to test
   * @return {Boolean}
   */
  _iselm:function(o) {
    return !!(o && o.nodeType) && o !== document;
  },

  /**
   * Returns true is the elm.tagName and the value passed for 'is' match
   * @private
   * @param {Element} elm
   * @param {String} is
   * @return {Boolean}
   */
  _istag:function(elm,is){
    return this._iselm(elm) && (elm.tagName && elm.tagName.toLowerCase()===is.toLowerCase());
  },

  /**
   * Executes a function on each item. The function receives the value, 
   * the key, and the object as paramters (in that order). If the function
   * returns true, the loops will be broken.
   * @public
   * @param {Array} o Array to test against
   * @param {Function} fn The function to execute
   * @return {Boolean} True if the loop is broken
   */
  _each:function(o,fn){
    if (o){
      if (o.some){
        if (o.length){
          o.some(fn,this);
        }
      }
      else {
        for(var i in o){
          if (o.hasOwnProperty(i) && fn.call(this, o[i], i)){
            return true;
          }
        }
      }
    }
  },

  /**
   * Returns the last item in an array
   * @private
   * @param {Array} o
   * @return {Mixed}
   */
  _last:function(o){
    if (this._isarray(o)){
      return o[o.length-1];
    }
  },

  /**
   * Fires a setTimeout in 'this' scope
   * @private
   * @param {Function} fn Callback method
   * @param {Number} ms (Optional) Milliseconds to delay
   * @return {Void}
   */
  _later:function(fn,ms){
    var _this=this;
    setTimeout(function(){ fn.call(_this); },ms || 0);
  },

  /**
   * Clones the passed variable
   * @private
   * @param {Mixed} o
   * @return {Mixed}
   */
  _clone:function(o){
    if (this._isarray(o)){
      return o.concat();
    }

    return o;
  },

  /**
   * Returns the closest ancestor to the elm passed that has the same tagName
   * value as the 'is' parameter.
   * @private
   * @param {String} is
   * @return {Element}
   */
  _ancestor:function(is){
    var elm=this;

    while(elm){
      elm = elm.parentNode;

      if (this._iselm(elm) && this._istag(elm,is)){
        return elm;
      }
    }

    return null;
  },


  /**
   * Normalizes an event
   * @private
   * @param {Event} e
   * @return {Object}
   */
  _event:function(e){
    e = e || Polymer.dom(event);

    if (!e.target){
      e.target = e.rootTarget;
    }

    return e;
  },

  /**
   * Handles the property change of selected
   * @private
   * @param {Boolean} selected
   * @return {Void}
   */
  _selected:function(selected){
    this.toggleClass('selected', selected, this.$.label);
    this.toggleClass('selected', selected, this.$.container);
  },

  /**
   * Handles the property change of disabled
   * @private
   * @param {Boolean} disabled
   * @return {Void}
   */
  _disabled:function(disabled){
    this.toggleClass('disabled', disabled, this.$.label);
    this.toggleClass('disabled', disabled, this.$.container);
  },

  /**
   * Retuns the classes for a label node
   * @private
   * @param {Object} o Object with all of the config settings to test
   * @return {String}
   */
  _classifyIcon:function(o){
    var classes=['tree-view-icon'];

    if (o.simple){
      classes.push('simple');
    }

    if (o.hide){
      classes.push('hide');
    }

    return classes.join(' ');
  }
};
</script>